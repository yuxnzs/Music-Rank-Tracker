# éŸ³æ¨‚æ¦œå–®è¿½è¹¤ App ğŸµ

![App Poster](./assets/poster.png)

ã€ŒéŸ³æ¨‚æ¦œå–®è¿½è¹¤æ‡‰ç”¨ç¨‹å¼ã€æ˜¯ä¸€å€‹å¯ä»¥è®“ä½¿ç”¨è€…å–å¾— Spotify æ­Œæ‰‹å°ˆè¼¯ã€æ­Œæ›²æ¯æ—¥ä¸²æµé‡ï¼Œä¸¦ä¸”é‚„å¯ä»¥æŸ¥çœ‹éŸ³æ¨‚çš„è©³ç´°è³‡æ–™ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨è€…é‚„å¯ä»¥æŸ¥çœ‹ç‰¹å®šæ­Œæ‰‹åœ¨ Billboard HOT 100 çš„æ’åæ­·å²ç´€éŒ„ã€‚

æ³¨æ„ï¼šæ­¤æ‡‰ç”¨ç¨‹å¼åƒ…åšç‚ºéç‡Ÿåˆ©ã€å­¸ç¿’ä¹‹ç”¨é€”ã€‚å…¶ä¸­ä½¿ç”¨åˆ°çš„ Kworb.net çˆ¬èŸ² Spotify ä¸²æµé‡è³‡æ–™å’Œ Billboard æ¦œå–®è³‡æ–™ï¼Œçš†åƒ…é™æ–¼å­¸ç¿’å’Œæ•™è‚²ç›®çš„ã€‚å­¸ç¿’çš„æŠ€è¡“åŒ…æ‹¬ Express å¾Œç«¯ API ä¼ºæœå™¨æ¶è¨­ã€å‰ç«¯ API ä¸²æ¥ã€Node.js çˆ¬èŸ²ã€é™£åˆ—è™•ç†ã€JSON è§£æå’Œç¶²è·¯è«‹æ±‚ç­‰ã€‚è€ƒé‡åˆ°è‘—ä½œæ¬Šä¿è­·ï¼Œå¾Œç«¯ç¨‹å¼ç¢¼å°‡ä¸æœƒå…¬é–‹ã€‚

Note: This application is only for non-profit educational and learning purposes. The Kworb.net Spotify streaming data scraped and the Billboard HOT 100 data used in this application are strictly limited for learning and educational purposes. This project helps in learning various technologies such as setting up an Express backend API server, frontend API integration, web scraping with Node.js, array operations, JSON parsing, handling HTTP requests, etc. In consideration of copyright protection, the backend code will not be made public.

## App Demo ğŸ“±

### ä¸²æµé‡æŸ¥è©¢

![streams_search](./assets/streams_search.gif)

### ä¾æ“šæ¯æ—¥ä¸²æµé‡æˆ–ç¸½ä¸²æµé‡æ’åº

![streams_sort](./assets/streams_sort.gif)

### éŸ³æ¨‚è©³æƒ…

![music_detail](./assets/music_detail.gif)

### éŸ³æ¨‚ç¯©é¸

![streams_filter](./assets/streams_filter.gif)

### Billboard HOT 100 æŸ¥è©¢

![billboard_search](./assets/billboard_search.gif)

### Billboard æ­Œæ›²æ’åº

![billboard_sort](./assets/billboard_sort.gif)

### Billboard æ­Œæ›²ç¯©é¸

![billboard_filter_song](./assets/billboard_filter_song.gif)

### Billboard æ’åç¯©é¸

![billboard_filter_rank](./assets/billboard_filter_rank.gif)

## å°ˆæ¡ˆæˆªåœ–èˆ‡åŠŸèƒ½èªªæ˜ ğŸ“¸

### æ¯æ—¥æ­Œæ›²ï¼å°ˆè¼¯ä¸²æµé‡èˆ‡ç¸½ä¸²æµé‡

![streams_search](./assets/streams_search.png)

### éŸ³æ¨‚è©³æƒ…

![music_detail](./assets/music_detail.png)

### åˆä½œæ­Œæ‰‹ï¼ˆå¦‚æœä¸€é¦–æ­Œæˆ–å°ˆè¼¯æœ‰å¤šä½æ­Œæ‰‹åˆä½œï¼‰

![collaborators](./assets/collaborators.png)

### é™¤æ­ç¾æ­Œæ‰‹ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹è¯èªæ­Œæ‰‹ä¸²æµé‡

![mandopop_1](./assets/mandopop_1.png)
![mandopop_2](./assets/mandopop_2.png)

### Kpop æ­Œæ‰‹ä¸²æµé‡

![kpop](./assets/kpop.png)

### ä½¿ç”¨ä¸­æ–‡ç¯©é¸æ­Œæ›²

![filter_by_chinese](./assets/filter_by_chinese.png)

### Billboard HOT 100 ç‰¹å®šæ­Œæ‰‹æ‰€æœ‰æ­·å²æ’åèˆ‡æ­Œæ›²è©³æƒ…

![billboard_search](./assets/billboard_search.png)

### ä¾æ“šæ’ååŠåœ¨æ¦œé€±æ•¸æ’åº

![billboard_sort](./assets/billboard_sort.png)

## å°ˆæ¡ˆæ¶æ§‹ ğŸ—

### ä½¿ç”¨æŠ€è¡“èˆ‡æ¡†æ¶

- **å‰ç«¯**ï¼šSwiftã€SwiftUIã€Almofireã€SDWebImage/SDWebImageSwiftUI
- **å¾Œç«¯**ï¼šNode.jsã€Expressã€axiosã€cheerioã€SpotifyWebApiNodeã€Dotenv

### ä¸²æµé‡å–å¾—é‚è¼¯

1. é€é `TextField` å–å¾—ä½¿ç”¨è€…è¼¸å…¥çš„æ­Œæ‰‹åç¨±
2. å°‡æ­Œæ‰‹åç¨±å‘å¾Œç«¯ API ä¼ºæœå™¨ç™¼é€ `HTTP GET` è«‹æ±‚
3. ä½¿ç”¨ `SpotifyWebApi` å‡½å¼åº«ç°¡åŒ– Spotify API çš„ä¸²æ¥ï¼Œé€é `searchArtists()` å–å¾—å›å‚³é™£åˆ—ä¸­ç¬¬ä¸€å€‹æœ€ç›¸ç¬¦çš„æ­Œæ‰‹è³‡è¨Šï¼Œä¸¦ç²å–æ­Œæ‰‹åç¨±ã€IDã€åœ–ç‰‡ç­‰ï¼Œè®“ä½¿ç”¨è€…ä¸å¿…è¼¸å…¥å®Œæ•´æ­Œæ‰‹åç¨±æ‰èƒ½å–å¾—ã€‚å¦‚è¼¸å…¥ `Tay`ï¼ŒSpotify API å›å‚³çš„é™£åˆ—ç¬¬ä¸€å€‹å…ƒç´ æœƒæ˜¯ `Taylor Swift`
4. ä¾æ“šæ­Œæ‰‹ ID èˆ‡éŸ³æ¨‚é¡å‹è‡³ Kworb.net çˆ¬å–æ­Œæ‰‹å°ˆè¼¯æˆ–æ­Œæ›²æ¯æ—¥ä¸²æµé‡ï¼Œç¶²å€æ ¼å¼ç‚ºï¼š `https://kworb.net/spotify/artist/${artistId}_${type}.html`ï¼Œä»¥ Taylor Swift ç‚ºä¾‹ï¼š `https://kworb.net/spotify/artist/06HL4z0CvFAxyc27GXpf02_songs.html`
5. ä½¿ç”¨ `cheerio` å¥—ä»¶è§£æ HTMLï¼Œä¸¦é‡å°å¯èƒ½ç‚º NaN çš„ä¸²æµé‡åšè™•ç†è½‰ç‚º 0ã€‚è§£ææ­Œåæˆ–å°ˆè¼¯åæ™‚ï¼Œä»¥åç¨±ç‚º a æ¨™ç±¤çš„ç‰¹æ€§ï¼Œé€²ä¸€æ­¥è§£æ a æ¨™ç±¤çš„ href å±¬æ€§ï¼Œå–å¾—æ­Œæ›²æˆ–å°ˆè¼¯çš„ Spotify IDï¼Œä¸¦æ ¹æ“šé¡å‹ç‚ºæ­Œæ›²æˆ–å°ˆè¼¯å–å¾—å°é¢ç­‰è³‡è¨Šï¼Œè®“ App ç•«é¢æ›´è±å¯Œ

> ç‰¹åˆ¥æ³¨æ„ï¼šæ­Œæ›²è³‡æ–™å›å‚³çš„ Spotify URL ç‰¹æ„è¨­è¨ˆæ”¹ç‚ºå°ˆè¼¯çš„ URLï¼Œè€Œéæ­Œæ›²çš„ URLï¼Œç›®çš„æ˜¯é¿å…è®“ä½¿ç”¨è€…é»æ“ŠæŒ‰éˆ•æ‰“é–‹ Spotify å¾Œæœƒç›´æ¥æ’­æ”¾æ­Œæ›²ï¼Œåˆ‡æ–·ä»–å€‘æ­£åœ¨è½çš„éŸ³æ¨‚ï¼Œå½±éŸ¿ä½¿ç”¨è€…é«”é©—ã€‚

#### ä¸²æµé‡å›å‚³ç¯„ä¾‹ï¼š

```json
{
  "artistInfo": {
    "name": "Taylor Swift",
    "image": "https://i.scdn.co/image/ab6761610000e5ebe672b5f553298dcdccb0e676"
  },
  "date": "2024/07/31",
  "streamData": [
    {
      "rank": 1,
      "musicName": "Cruel Summer",
      "albumName": "Lover",
      "albumType": null,
      "totalTracks": null,
      "trackNumber": 2,
      "duration": "2:58",
      "releaseDate": "2019-08-23",
      "imageUrl": "https://i.scdn.co/image/ab67616d0000b273e787cffec20aa2a396a61647",
      "totalStreams": 2335196365,
      "dailyStreams": 2953320,
      "popularity": 92,
      "availableMarkets": null,
      "spotifyUrl": "https://open.spotify.com/album/1NAmidJlEaVgA3MpcPFYGq",
      "musicId": "1BxfuPKGuaTgP7aM0Bbdwr",
      "isCollaboration": false
    },
    {
      "rank": 40,
      "musicName": "Fortnight (feat. Post Malone)",
      "albumName": "THE TORTURED POETS DEPARTMENT: THE ANTHOLOGY",
      "albumType": null,
      "totalTracks": null,
      "trackNumber": 1,
      "duration": "3:48",
      "releaseDate": "2024-04-19",
      "imageUrl": "https://i.scdn.co/image/ab67616d0000b2738ecc33f195df6aa257c39eaa",
      "totalStreams": 545126846,
      "dailyStreams": 2431027,
      "popularity": 82,
      "availableMarkets": null,
      "spotifyUrl": "https://open.spotify.com/album/5H7ixXZfsNMGbIE5OBSpcb",
      "musicId": "6dODwocEuGzHAavXqTbwHv",
      "isCollaboration": true
    }
  ]
}
```

### åˆä½œæ­Œæ‰‹é‚è¼¯

1. åœ¨ç²å–éŸ³æ¨‚è³‡è¨Šæ™‚ä¾æ“š `track.artists.length > 1` åˆ¤æ–·æ˜¯å¦æœ‰åˆä½œæ­Œæ‰‹
2. è‹¥è©²éŸ³æ¨‚æœ‰åˆä½œæ­Œæ‰‹ï¼Œåœ¨ App ä¸­é»é€²éŸ³æ¨‚è©³æƒ…æ™‚ï¼Œæœƒå‘å¾Œç«¯ API ä¼ºæœå™¨ç™¼é€è«‹æ±‚ï¼Œä¸¦åˆ¤æ–·ç‚ºæ­Œæ›²æˆ–å°ˆè¼¯ï¼Œåˆ†åˆ¥ä½¿ç”¨ `getTrack()` æˆ– `getAlbum()` å–å¾—åˆä½œæ­Œæ‰‹çš„è³‡è¨Š

#### åˆä½œæ­Œæ‰‹å›å‚³ç¯„ä¾‹ï¼š

```json
[
  {
    "name": "Jessie J",
    "image": "https://i.scdn.co/image/ab6761610000e5eb91f0dd753c09e051675a1ca6"
  },
  {
    "name": "Ariana Grande",
    "image": "https://i.scdn.co/image/ab6761610000e5eb40b5c07ab77b6b1a9075fdc0"
  },
  {
    "name": "Nicki Minaj",
    "image": "https://i.scdn.co/image/ab6761610000e5eb07a50f0a9a8f11e5a1102cbd"
  }
]
```

### Billboard HOT 100 æ’åå–å¾—é‚è¼¯

1. åˆ©ç”¨ TextField å–å¾—ä½¿ç”¨è€…è¼¸å…¥çš„æ­Œæ‰‹åç¨±ï¼Œä¸¦é€é `HTTP GET` è«‹æ±‚å‚³é€è‡³å¾Œç«¯ API ä¼ºæœå™¨ï¼Œä¸²æ¥ Spotify API å–å¾—æœ€åŒ¹é…çš„æ­Œæ‰‹åç¨±
2. ä½¿ç”¨ GitHub ä¸Š [mhollingshead](https://github.com/mhollingshead) æ•´ç†çš„ [Billboard HOT 100 JSON æ ¼å¼æ¦œå–®è³‡æ–™](https://github.com/mhollingshead/billboard-hot-100) ä½œç‚ºè³‡æ–™ä¾†æºï¼Œå…ˆé€é `axios` å–å¾—è³‡æ–™ï¼Œå†é€é `filter()` ç¯©é¸å‡ºç¬¦åˆæ­Œæ‰‹åç¨±çš„æ­Œæ›²
3. ç”±æ–¼ä¸€é¦–æ­Œå¯èƒ½æœƒæœ‰å¤šç­†è³‡æ–™ï¼ˆä¸Šæ¦œå¤šå€‹é€±æ•¸ï¼‰ï¼Œå› æ­¤ä½¿ç”¨å…©å€‹ `object` åˆ†åˆ¥å­˜æ”¾ `firstWeekData` èˆ‡ `latestSongs`ï¼Œ`firstWeekData` ç”¨æ–¼å­˜æ”¾é¦–é€±ä¸Šæ¦œçš„æ’åèˆ‡æ—¥æœŸï¼Œ`latestSongs` å‰‡é€é `weeks_on_chart` é€±æ•¸æœ€å¤§è€…ç‚ºæ­Œæ›²æœ€æ–°è³‡æ–™ç‰¹æ€§ï¼Œç”¨æ–¼å­˜æ”¾æ­Œæ›²æœ€è¿‘ä¸€æ¬¡ä¸Šæ¦œçš„è³‡æ–™ã€‚ä½¿ç”¨ç‰©ä»¶åŸå› ç‚ºé€é `æ­Œå - æ­Œæ‰‹åç¨±`ï¼Œå¦‚ `22 (Taylor's Version) - Taylor Swift` ä½œç‚º `key`ï¼Œèƒ½å¤ æ–¹ä¾¿åˆ¤æ–·ä¸€é¦–æ­Œæ˜¯å¦åœ¨å…ˆå‰å·²ç¶“ä¸Šæ¦œé
4. å°‡ `firstWeekData` èˆ‡ `latestSongs` çš„è³‡æ–™çµåˆ

#### ç¬¬ 3 æ­¥ç¨‹å¼ç¢¼

```javascript
// Use a dictionary to keep track of the latest record and first week data for each song
const latestSongs = {};
const firstWeekData = {};

// allSongs is an array of all songs by certain artist
allSongs.forEach((song) => {
  // Use song name and artist as a key to uniquely identify each song
  const key = `${song.song}-${song.artist}`;

  // Data for the first week on chart
  // If the song is not already in the dictionary or it's the first week on the chart, store the position and date as first week data
  if (!firstWeekData[key] || song.weeks_on_chart === 1) {
    firstWeekData[key] = {
      position: song.this_week,
      date: song.date,
    };
  }

  // Update the latest week's data
  // If the song is already in the dictionary, compare "weeks_on_chart" to keep the latest record
  if (latestSongs[key]) {
    if (song.weeks_on_chart > latestSongs[key].weeks_on_chart) {
      latestSongs[key] = song;
    }
  } else {
    // Add the song to the dictionary if it's not already there, means it's the only record
    latestSongs[key] = song;
  }
});
```

#### Billboard HOT 100 å›å‚³ç¯„ä¾‹

```json
{
  "artistInfo": {
    "name": "Olivia Rodrigo",
    "image": "https://i.scdn.co/image/ab6761610000e5ebe03a98785f3658f0b6461ec4"
  },
  "historyData": [
    {
      "song": "All I Want",
      "artist": "Olivia Rodrigo",
      "firstChartedPosition": 90,
      "firstChartedDate": "2020-01-14",
      "lastChartedPosition": 100,
      "lastChartedDate": "2020-01-21",
      "lastWeekPosition": 90,
      "peakPosition": 90,
      "weeksOnChart": 2
    },
    {
      "song": "Drivers License",
      "artist": "Olivia Rodrigo",
      "firstChartedPosition": 1,
      "firstChartedDate": "2021-01-19",
      "lastChartedPosition": 43,
      "lastChartedDate": "2021-07-27",
      "lastWeekPosition": 42,
      "peakPosition": 1,
      "weeksOnChart": 28
    }
  ]
}
```

## æœªä¾†åŠŸèƒ½èˆ‡æ”¹é€² âœ¨

- **æ—¥æœŸæœå°‹**ï¼šåœ¨ App ä¸­æ–°å¢ `DatePicker`ï¼Œä¸¦é€éä½¿ç”¨è€…é¸æ“‡çš„æ—¥æœŸä½œç‚ºåƒæ•¸å‚³çµ¦å¾Œç«¯ï¼Œå¾Œç«¯ä½¿ç”¨ `find()` å–å¾—ç‰¹å®šæ—¥æœŸè³‡æ–™ã€‚å¾Œç«¯å‰‡ä½¿ç”¨ `find()` å‡½å¼ä¾†å–å¾—åŒ¹é…è©²æ—¥æœŸçš„æ’åè³‡æ–™ï¼Œä¸¦å°‡é€™äº›è³‡æ–™å›å‚³çµ¦å‰ç«¯ã€‚

## è³‡æ–™ä¾†æºèˆ‡ç‰ˆæ¬Šè²æ˜ ğŸ“Œ

### Streaming Data

Spotify ä¸²æµè³‡æ–™ä¾†è‡ª [Kworb.net](https://kworb.net)ï¼Œè©²ç¶²ç«™æä¾›å„å¤§å¹³å°ä¸²æµé‡çš„æ’è¡Œæ¦œï¼ŒåŒ…æ‹¬ Spotifyã€iTunesã€YouTube ç­‰ã€‚éŸ³æ¨‚è³‡æ–™å‰‡ä¾†è‡ª Spotify APIï¼Œæ›´å¤šè³‡è¨Šè«‹åƒè€ƒ [Spotify for Developers](https://developer.spotify.com/documentation/web-api)ã€‚

The Spotify streaming data comes from [Kworb.net](https://kworb.net), the website provides rankings and streaming data on various platforms, including Spotify, iTunes, YouTube, etc. The music data comes from the Spotify API, for more information please refer to [Spotify for Developers](https://developer.spotify.com/documentation/web-api).

### Billboard HOT 100

æœ¬é …ç›®ä½¿ç”¨çš„ Billboard HOT 100 è³‡æ–™ç”±éå®˜æ–¹ä¾†æºæ•´ç†ï¼Œæ¶µè“‹å¾ 1958 å¹´åˆ°ç›®å‰çš„æ¯é€±æ’è¡Œæ¦œæ•¸æ“šã€‚æœ¬è³‡æ–™åƒ…ç”¨æ–¼å€‹äººå­¸ç¿’å’Œç·´ç¿’ï¼Œç„¡ä»»ä½•å•†æ¥­ç”¨é€”ã€‚æœ¬é …ç›®èˆ‡ä»»ä½•å®˜æ–¹æ©Ÿæ§‹æˆ–å…¬å¸ç„¡é—œï¼Œåƒ…ç‚ºäº†å±•ç¤ºå’Œå­¸ç¿’ç¨‹å¼è¨­è¨ˆæŠ€èƒ½ã€‚è³‡æ–™ç”± Billboard æ“æœ‰ï¼Œæ›´å¤šè©³æƒ…è«‹åƒè€ƒ [Penske Media Corporation](https://www.pmc.com/terms-of-use) å’Œ [Billboard](https://www.billboard.com/website-terms-of-use)ã€‚

The Billboard HOT 100 data used in this project is from unofficial sources, covering weekly chart data from 1958 to the present. This data is used for personal learning and practice only and has no commercial use. This project is not related to, nor affiliated with, any official organization or company and is only for the purpose of showcasing and learning programming skills. This data is owned by Billboard, see more details at [Penske Media Corporation](https://www.pmc.com/terms-of-use) and [Billboard](https://www.billboard.com/website-terms-of-use/).
